# Copyright (C) 2022 Broadcom. All rights reserved.
# The term "Broadcom" refers solely to the Broadcom Inc. corporate affiliate
# that owns the software below.
# This work is licensed under the OpenAFC Project License, a copy of which is
# included with this software program.

# Manifest for ingress of configuration with internal cluster
{{- $ := unset $ "component" -}}
{{- if get $.Values "ingress" }}

apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: {{ include "afc.ingressName" . }}
  labels: {{- include "afc.commonLabels" . | nindent 4 }}
spec:
  {{- include "afc.ingressClass" . | indent 2 }}
  rules: {{- include "afc.ingressRules" . | nindent 4 }}

{{- end -}}
